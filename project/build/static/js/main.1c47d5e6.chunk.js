(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{67:function(e,t,c){"use strict";c.r(t),c.d(t,"store",(function(){return Me}));var a,n=c(1),s=c.n(n),r=c(21),i=c.n(r),l=c(37),o=c.n(l),d="T2xpdmVyLmNvbm5lckBnbWFpbC5jb20=",j=function(e){localStorage.setItem(d,e)};!function(e){e[e.Unauthorized=401]="Unauthorized"}(a||(a={}));var u,m,b,h=c(2),_=c(7),O=c(5),f=c(6);!function(e){e.Root="/",e.MyList="/my-list",e.MoviePage="/movie-page/:movieId",e.AddReview="/add-review/:movieId",e.Player="/player/:movieId",e.SignIn="/sign-in"}(u||(u={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(m||(m={})),function(e){e.Films="/films",e.Comments="/comments",e.MyFilms="/favorite",e.Promo="/promo",e.Login="/login",e.Logout="/logout"}(b||(b={}));var v=c(24),x=c(10),p=c(0);var g=function(){return Object(p.jsxs)("footer",{className:"page-footer",children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsxs)(O.b,{className:"logo__link logo__link--light",to:"/",children:[Object(p.jsx)("span",{className:"logo__letter logo__letter--1",children:"W"}),Object(p.jsx)("span",{className:"logo__letter logo__letter--2",children:"T"}),Object(p.jsx)("span",{className:"logo__letter logo__letter--3",children:"W"})]})}),Object(p.jsx)("div",{className:"copyright",children:Object(p.jsx)("p",{children:"\xa9 2019 What to watch Ltd."})})]})};var N=function(e){var t=e.film;return Object(p.jsxs)("video",{width:"280",height:"175",autoPlay:!0,muted:!0,children:[Object(p.jsx)("source",{src:t.preview_video_link,type:'video/webm; codecs="vp8, vorbis"'}),Object(p.jsx)("source",{src:t.preview_video_link,type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})]})};var w=function(e){var t,c=e.film,a=Object(n.useState)(Boolean),s=Object(x.a)(a,2),r=s[0],i=s[1];function l(){clearTimeout(t),i(!1)}return Object(p.jsxs)("article",{onMouseOver:function(){t=setTimeout((function(){return i(!0)}),1e3)},onMouseOut:l,className:"small-film-card catalog__films-card",children:[Object(p.jsx)("div",{className:"small-film-card__image",children:r?Object(p.jsx)(N,{film:c}):Object(p.jsx)("img",{src:c.preview_image,alt:c.name,width:"280",height:"175"})}),Object(p.jsx)("h3",{className:"small-film-card__title",children:Object(p.jsx)(O.b,{className:"small-film-card__link",to:"/movie-page/".concat(c.id),onClick:l,children:c.name})})]})};var y=function(e){var t=e.films;return Object(p.jsx)("div",{className:"catalog__films-list",children:t.map((function(e){return Object(p.jsx)(w,{film:e},e.id)}))})};var k,C=function(e){var t=e.films,c=e.genre,a=e.onUserClick,n=t.map((function(e){return e.genre})),s=Object(v.a)(new Set(n));function r(e){e.preventDefault(),a(e.target.textContent)}return Object(p.jsxs)("ul",{className:"catalog__genres-list",children:[Object(p.jsx)("li",{className:"catalog__genres-item ".concat("All genres"===c?"catalog__genres-item--active":""),onClick:r,children:Object(p.jsx)("a",{href:"/",className:"catalog__genres-link",children:"All genres"})}),s.map((function(e){return Object(p.jsx)("li",{className:"catalog__genres-item ".concat(e===c?"catalog__genres-item--active":""),onClick:r,children:Object(p.jsx)("a",{href:"/",className:"catalog__genres-link",children:e})},e)}))]})};!function(e){e.ChangeGenre="films/changeGenre",e.LoadFilms="films/loadFilms",e.LoadCurrentFilm="films/loadCurrentFilm",e.LoadPromoFilm="films/loadPromoFilm",e.LoadSimilarFilms="films/loadSimilarFilms",e.LoadMyFilms="films/loadMyFilms",e.LoadComments="comments/loadComments",e.ShowMoreFilms="data/showMoreFilms",e.RequireAuthorization="user/requireAuthorization",e.RequireLogout="user/requireLogout",e.UserAuthorization="user/userAuthorization",e.SaveUserAvatarUrl="user/saveUserAvatarUrl"}(k||(k={}));var S=Object(_.b)(k.ChangeGenre,(function(e){return{payload:e}})),F=Object(_.b)(k.LoadFilms,(function(e){return{payload:e}})),L=Object(_.b)(k.LoadMyFilms,(function(e){return{payload:e}})),A=Object(_.b)(k.LoadCurrentFilm,(function(e){return{payload:e}})),M=Object(_.b)(k.LoadPromoFilm,(function(e){return{payload:e}})),U=Object(_.b)(k.LoadSimilarFilms,(function(e){return{payload:e}})),R=Object(_.b)(k.LoadComments,(function(e){return{payload:e}})),T=Object(_.b)(k.ShowMoreFilms),P=Object(_.b)(k.RequireAuthorization,(function(e){return{payload:e}})),D=Object(_.b)(k.SaveUserAvatarUrl,(function(e){return{payload:e}})),I=Object(_.b)(k.RequireLogout);var z=function(e){var t=e.onShowMoreClick;return Object(p.jsx)("div",{className:"catalog__more",children:Object(p.jsx)("button",{className:"catalog__button",type:"button",onClick:t,children:"Show more"})})};var W,q,B=function(){return Object(p.jsxs)(O.b,{className:"logo__link",to:"/",children:[Object(p.jsx)("span",{className:"logo__letter logo__letter--1",children:"W"}),Object(p.jsx)("span",{className:"logo__letter logo__letter--2",children:"T"}),Object(p.jsx)("span",{className:"logo__letter logo__letter--3",children:"W"})]})},E=c(17),G=c(11),H=Object(_.c)({films:[],similarFilms:[],myFilms:[],promoFilm:{id:0,name:"",poster_image:"",preview_image:"",background_image:"",background_color:"",video_link:"",preview_video_link:"",description:"",rating:0,scores_count:0,director:"",starring:[],run_time:0,genre:"",released:0,is_favorite:!1},currentFilm:{id:0,name:"",poster_image:"",preview_image:"",background_image:"",background_color:"",video_link:"",preview_video_link:"",description:"",rating:0,scores_count:0,director:"",starring:[],run_time:0,genre:"",released:0,is_favorite:!1}},(function(e){e.addCase(F,(function(e,t){e.films=t.payload})).addCase(A,(function(e,t){e.currentFilm=t.payload})).addCase(U,(function(e,t){e.similarFilms=t.payload})).addCase(M,(function(e,t){e.promoFilm=t.payload})).addCase(L,(function(e,t){e.myFilms=t.payload}))})),J={genre:"All genres",comments:[],count:8},V=Object(_.c)(J,(function(e){e.addCase(S,(function(e,t){e.genre=t.payload})).addCase(R,(function(e,t){e.comments=t.payload})).addCase(T,(function(e){e.count+=8}))})),K={authorizationStatus:m.Unknown,isDataLoaded:!1,userAvatarUrl:""},Q=Object(_.c)(K,(function(e){e.addCase(D,(function(e,t){e.userAvatarUrl=t.payload})).addCase(P,(function(e,t){e.authorizationStatus=t.payload,e.isDataLoaded=!0})).addCase(I,(function(e){e.authorizationStatus=m.NoAuth}))}));!function(e){e.films="FILMS",e.filmsOther="FILMS_OTHER",e.user="USER"}(q||(q={}));var X=Object(G.c)((W={},Object(E.a)(W,q.films,H),Object(E.a)(W,q.filmsOther,V),Object(E.a)(W,q.user,Q),W)),Y=function(e){return e[q.user].authorizationStatus},Z=function(e){return e[q.user].isDataLoaded},$=function(e){return e[q.user].userAvatarUrl},ee=c(4),te=c.n(ee),ce=c(15),ae=function(e){return function(){var t=Object(ce.a)(te.a.mark((function t(c,a,n){var s,r;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("".concat(b.Films,"/").concat(e));case 2:s=t.sent,r=s.data,c(A(r));case 5:case"end":return t.stop()}}),t)})));return function(e,c,a){return t.apply(this,arguments)}}()},ne=function(){return function(){var e=Object(ce.a)(te.a.mark((function e(t,c,a){var n,s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(b.Promo);case 2:n=e.sent,s=n.data,t(M(s));case 5:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}()},se=function(){return function(){var e=Object(ce.a)(te.a.mark((function e(t,c,a){var n,s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(b.MyFilms);case 2:n=e.sent,s=n.data,t(L(s));case 5:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}()},re=function(e,t){return function(){var c=Object(ce.a)(te.a.mark((function c(a,n,s){var r,i;return te.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,s.post("".concat(b.MyFilms,"/").concat(e,"/").concat(t));case 2:r=c.sent,i=r.data,a(A(i));case 5:case"end":return c.stop()}}),c)})));return function(e,t,a){return c.apply(this,arguments)}}()};var ie=function(e){var t=e.authorizationStatus,c=Object(h.b)();return t===m.Auth?Object(p.jsx)("a",{className:"user-block__link",href:"/",onClick:function(e){e.preventDefault(),c(function(){var e=Object(ce.a)(te.a.mark((function e(t,c,a){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.delete(b.Logout),localStorage.removeItem(d),t(I());case 3:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}())},children:"Sign Out"}):Object(p.jsx)(O.b,{className:"user-block__link",to:u.SignIn,children:"Sign in"})};var le=function(){var e=Object(h.c)(Y),t=Object(h.c)($),c=Object(f.g)(),a=Object(h.b)();return Object(p.jsxs)("header",{className:"page-header film-card__head",children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)(B,{})}),Object(p.jsxs)("ul",{className:"user-block",children:[Object(p.jsx)("li",{className:"user-block__item",children:Object(p.jsx)("div",{className:"user-block__avatar",onClick:function(){a(se()),c.push(u.MyList)},children:Object(p.jsx)("img",{src:e===m.Auth?t:"img/avatar.jpg",alt:"User avatar",width:"63",height:"63"})})}),Object(p.jsx)("li",{className:"user-block__item",children:Object(p.jsx)(ie,{authorizationStatus:e})})]})]})},oe=function(e){return e[q.films].films},de=function(e){return e[q.films].similarFilms},je=function(e){return e[q.films].currentFilm},ue=function(e){return e[q.films].promoFilm},me=function(e){return e[q.films].myFilms},be=function(e){return e[q.filmsOther].genre},he=function(e){return e[q.filmsOther].comments},_e=function(e){return e[q.filmsOther].count};var Oe=function(){var e=Object(h.c)(oe),t=Object(h.c)(be),c=Object(h.c)(_e),a=Object(h.c)(ue),s=Object(h.b)(),r=Object(f.g)(),i=Object(n.useState)(e),l=Object(x.a)(i,2),o=l[0],d=l[1];return Object(n.useEffect)((function(){var a="All genres"===t?Object(v.a)(e):e.filter((function(e){return e.genre===t}));c<a.length?d(a.slice(0,c)):d(a)}),[t,c,e]),Object(p.jsxs)("div",{children:[Object(p.jsxs)("section",{className:"film-card",children:[Object(p.jsx)("div",{className:"film-card__bg",children:Object(p.jsx)("img",{src:"img/bg-the-grand-budapest-hotel.jpg",alt:"The Grand Budapest Hotel"})}),Object(p.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(p.jsx)(le,{}),!!e.length&&Object(p.jsx)("div",{className:"film-card__wrap",children:Object(p.jsxs)("div",{className:"film-card__info",children:[Object(p.jsx)("div",{className:"film-card__poster",children:Object(p.jsx)("img",{src:a.poster_image,alt:a.name,width:"218",height:"327"})}),Object(p.jsxs)("div",{className:"film-card__desc",children:[Object(p.jsx)("h2",{className:"film-card__title",children:a.name}),Object(p.jsxs)("p",{className:"film-card__meta",children:[Object(p.jsx)("span",{className:"film-card__genre",children:a.genre}),Object(p.jsx)("span",{className:"film-card__year",children:a.released})]}),Object(p.jsxs)("div",{className:"film-card__buttons",children:[Object(p.jsxs)("button",{className:"btn btn--play film-card__button",type:"button",onClick:function(){return r.push("/player/".concat(a.id))},children:[Object(p.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(p.jsx)("use",{href:"#play-s"})}),Object(p.jsx)("span",{children:"Play"})]}),Object(p.jsxs)("button",{className:"btn btn--list film-card__button",type:"button",onClick:function(e){var t,c;e.preventDefault(),t=String(a.id),c=Number(a.is_favorite),s(re(t,Number(!c))),s(ne()),s(se())},children:[Object(p.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(p.jsx)("use",{href:"#".concat(a.is_favorite?"in-list":"add")})}),Object(p.jsx)("span",{children:"My list"})]})]})]})]})})]}),Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsxs)("section",{className:"catalog",children:[Object(p.jsx)("h2",{className:"catalog__title visually-hidden",children:"Catalog"}),Object(p.jsx)(C,{films:e,genre:t,onUserClick:function(e){s(S(e))}}),Object(p.jsx)(y,{films:o}),c<=o.length&&Object(p.jsx)(z,{onShowMoreClick:function(){s(T())}})]}),Object(p.jsx)(g,{})]})]})},fe=c(20);var ve=function(){var e=Object(h.c)(oe),t=Object(h.c)(Y),c=Object(h.c)($),a=Object(h.b)(),r=function(e,t){var c=t.rating,n=t.comment;a(function(e,t){var c=t.rating,a=t.comment;return function(){var t=Object(ce.a)(te.a.mark((function t(n,s,r){var i,l;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("".concat(b.Comments,"/").concat(e),{rating:c,comment:a});case 2:i=t.sent,l=i.data,n(R(l));case 5:case"end":return t.stop()}}),t)})));return function(e,c,a){return t.apply(this,arguments)}}()}(e,{rating:c,comment:n}))},i=Object(f.h)().movieId,l=e.find((function(e){return e.id===parseInt(i,10)})),o=Object(n.useState)({rating:0,comment:""}),d=Object(x.a)(o,2),j=d[0],m=d[1],_=Object(f.g)();return Object(p.jsxs)("section",{className:"film-card film-card--full",children:[Object(p.jsxs)("div",{className:"film-card__header",children:[Object(p.jsx)("div",{className:"film-card__bg",children:Object(p.jsx)("img",{src:null===l||void 0===l?void 0:l.background_image,alt:null===l||void 0===l?void 0:l.name})}),Object(p.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(p.jsxs)("header",{className:"page-header",children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)(B,{})}),Object(p.jsx)("nav",{className:"breadcrumbs",children:Object(p.jsxs)("ul",{className:"breadcrumbs__list",children:[Object(p.jsx)("li",{className:"breadcrumbs__item",children:Object(p.jsx)("a",{href:"film-page.html",className:"breadcrumbs__link",children:null===l||void 0===l?void 0:l.name})}),Object(p.jsx)("li",{className:"breadcrumbs__item",children:Object(p.jsx)("a",{className:"breadcrumbs__link",href:"/",children:"Add review"})})]})}),Object(p.jsxs)("ul",{className:"user-block",children:[Object(p.jsx)("li",{className:"user-block__item",children:Object(p.jsx)("div",{className:"user-block__avatar",onClick:function(){return _.push(u.MyList)},children:Object(p.jsx)("img",{src:c,alt:"User avatar",width:"63",height:"63"})})}),Object(p.jsx)("li",{className:"user-block__item",children:Object(p.jsx)(ie,{authorizationStatus:t})})]})]}),Object(p.jsx)("div",{className:"film-card__poster film-card__poster--small",children:Object(p.jsx)("img",{src:null===l||void 0===l?void 0:l.poster_image,alt:null===l||void 0===l?void 0:l.name,width:"218",height:"327"})})]}),Object(p.jsx)("div",{className:"add-review",children:Object(p.jsxs)("form",{action:"#",className:"add-review__form",onSubmit:function(e){e.preventDefault(),r(i,{rating:j.rating,comment:j.comment}),_.push("".concat(u.MoviePage).concat(i))},children:[Object(p.jsx)("div",{className:"rating",children:Object(p.jsx)("div",{className:"rating__stars",children:[10,9,8,7,6,5,4,3,2,1].map((function(e){return Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("input",{onClick:function(){return t=e,void m((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{rating:t})}));var t},className:"rating__input",id:"star-".concat(e),type:"radio",name:"rating",value:e}),Object(p.jsx)("label",{className:"rating__label",htmlFor:"star-".concat(e),children:"Rating ".concat(e)})]},e)}))})}),Object(p.jsxs)("div",{className:"add-review__text",children:[Object(p.jsx)("textarea",{className:"add-review__textarea",name:"review-text",id:"review-text",placeholder:"Review text",onChange:function(e){return function(e){e.preventDefault(),m((function(t){return Object(fe.a)(Object(fe.a)({},t),{},{comment:e.target.value})}))}(e)}}),Object(p.jsx)("div",{className:"add-review__submit",children:Object(p.jsx)("button",{className:"add-review__btn",type:"submit",children:"Post"})})]})]})})]})};var xe=function(e){var t=e.film;return Object(p.jsxs)(n.Fragment,{children:[Object(p.jsxs)("div",{className:"film-rating",children:[Object(p.jsx)("div",{className:"film-rating__score",children:null===t||void 0===t?void 0:t.rating}),Object(p.jsxs)("p",{className:"film-rating__meta",children:[Object(p.jsx)("span",{className:"film-rating__level",children:"Very good"}),Object(p.jsx)("span",{className:"film-rating__count",children:null===t||void 0===t?void 0:t.scores_count})]})]}),Object(p.jsxs)("div",{className:"film-card__text",children:[Object(p.jsx)("p",{children:null===t||void 0===t?void 0:t.description}),Object(p.jsx)("p",{className:"film-card__director",children:Object(p.jsxs)("strong",{children:["Director: ",null===t||void 0===t?void 0:t.director]})}),Object(p.jsx)("p",{className:"film-card__starring",children:Object(p.jsxs)("strong",{children:["Starring: ",null===t||void 0===t?void 0:t.starring.join(", ")]})})]})]})};var pe=function(e){var t=e.film;return Object(p.jsxs)("div",{className:"film-card__text film-card__row",children:[Object(p.jsxs)("div",{className:"film-card__text-col",children:[Object(p.jsxs)("p",{className:"film-card__details-item",children:[Object(p.jsx)("strong",{className:"film-card__details-name",children:"Director"}),Object(p.jsx)("span",{className:"film-card__details-value",children:null===t||void 0===t?void 0:t.director})]}),Object(p.jsxs)("p",{className:"film-card__details-item",children:[Object(p.jsx)("strong",{className:"film-card__details-name",children:"Starring"}),Object(p.jsx)("span",{className:"film-card__details-value",children:null===t||void 0===t?void 0:t.starring.join("\n")})]})]}),Object(p.jsxs)("div",{className:"film-card__text-col",children:[Object(p.jsxs)("p",{className:"film-card__details-item",children:[Object(p.jsx)("strong",{className:"film-card__details-name",children:"Run Time"}),Object(p.jsx)("span",{className:"film-card__details-value",children:null===t||void 0===t?void 0:t.run_time})]}),Object(p.jsxs)("p",{className:"film-card__details-item",children:[Object(p.jsx)("strong",{className:"film-card__details-name",children:"Genre"}),Object(p.jsx)("span",{className:"film-card__details-value",children:null===t||void 0===t?void 0:t.genre})]}),Object(p.jsxs)("p",{className:"film-card__details-item",children:[Object(p.jsx)("strong",{className:"film-card__details-name",children:"Released"}),Object(p.jsx)("span",{className:"film-card__details-value",children:null===t||void 0===t?void 0:t.released})]})]})]})};var ge=function(e){var t=e.comments,c=[],a=[];if(t.length){var n=Math.ceil(t.length/2);c=t.slice(0,n),a=t.slice(n,t.length)}return Object(p.jsxs)("div",{className:"film-card__reviews film-card__row",children:[Object(p.jsx)("div",{className:"film-card__reviews-col",children:c.map((function(e){return Object(p.jsxs)("div",{className:"review",children:[Object(p.jsxs)("blockquote",{className:"review__quote",children:[Object(p.jsx)("p",{className:"review__text",children:e.comment}),Object(p.jsxs)("footer",{className:"review__details",children:[Object(p.jsx)("cite",{className:"review__author",children:e.user.name}),Object(p.jsx)("time",{className:"review__date",dateTime:"2016-12-24",children:"December 24, 2016"})]})]}),Object(p.jsx)("div",{className:"review__rating",children:e.rating})]},e.id)}))}),Object(p.jsx)("div",{className:"film-card__reviews-col",children:a.map((function(e){return Object(p.jsxs)("div",{className:"review",children:[Object(p.jsxs)("blockquote",{className:"review__quote",children:[Object(p.jsx)("p",{className:"review__text",children:e.comment}),Object(p.jsxs)("footer",{className:"review__details",children:[Object(p.jsx)("cite",{className:"review__author",children:e.user.name}),Object(p.jsx)("time",{className:"review__date",dateTime:"2016-12-24",children:"December 24, 2016"})]})]}),Object(p.jsx)("div",{className:"review__rating",children:e.rating})]},e.id)}))})]})};var Ne=function(){var e=Object(h.c)(je),t=Object(h.c)(Y),c=Object(h.c)(he),a=Object(h.c)(de),s=Object(f.g)(),r=Object(h.b)(),i=function(e,t){r(re(e,t)),r(ae(e)),r(se())},l=Object(f.h)().movieId,o=Object(n.useState)("Overview"),d=Object(x.a)(o,2),j=d[0],u=d[1];Object(n.useEffect)((function(){Me.dispatch(function(e){return function(){var t=Object(ce.a)(te.a.mark((function t(c,a,n){var s,r;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("".concat(b.Comments,"/").concat(e));case 2:s=t.sent,r=s.data,c(R(r));case 5:case"end":return t.stop()}}),t)})));return function(e,c,a){return t.apply(this,arguments)}}()}(l)),Me.dispatch(function(e){return function(){var t=Object(ce.a)(te.a.mark((function t(c,a,n){var s,r;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("".concat(b.Films,"/").concat(e,"/similar"));case 2:s=t.sent,r=s.data,c(U(r));case 5:case"end":return t.stop()}}),t)})));return function(e,c,a){return t.apply(this,arguments)}}()}(l)),Me.dispatch(ae(l))}),[l]);var _=Object(n.useCallback)((function(e){e.preventDefault(),u(e.currentTarget.innerText)}),[]);return Object(p.jsxs)("div",{children:[Object(p.jsxs)("section",{className:"film-card film-card--full",children:[Object(p.jsxs)("div",{className:"film-card__hero",children:[Object(p.jsx)("div",{className:"film-card__bg",children:Object(p.jsx)("img",{src:e.background_image,alt:e.name})}),Object(p.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(p.jsx)(le,{}),Object(p.jsx)("div",{className:"film-card__wrap",children:Object(p.jsxs)("div",{className:"film-card__desc",children:[Object(p.jsx)("h2",{className:"film-card__title",children:e.name}),Object(p.jsxs)("p",{className:"film-card__meta",children:[Object(p.jsx)("span",{className:"film-card__genre",children:e.genre}),Object(p.jsx)("span",{className:"film-card__year",children:e.released})]}),Object(p.jsxs)("div",{className:"film-card__buttons",children:[Object(p.jsxs)("button",{className:"btn btn--play film-card__button",type:"button",onClick:function(){return s.push("/player/".concat(e.id))},children:[Object(p.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(p.jsx)("use",{href:"#play-s"})}),Object(p.jsx)("span",{children:"Play"})]}),Object(p.jsxs)("button",{className:"btn btn--list film-card__button",type:"button",onClick:function(t){t.preventDefault(),e.is_favorite?i(l,0):i(l,1)},children:[Object(p.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(p.jsx)("use",{href:"#".concat(e.is_favorite?"in-list":"add")})}),Object(p.jsx)("span",{children:"My list"})]}),t===m.Auth?Object(p.jsx)(O.b,{className:"btn film-card__button",to:"/add-review/".concat(e.id),children:"Add review"}):""]})]})})]}),Object(p.jsx)("div",{className:"film-card__wrap film-card__translate-top",children:Object(p.jsxs)("div",{className:"film-card__info",children:[Object(p.jsx)("div",{className:"film-card__poster film-card__poster--big",children:Object(p.jsx)("img",{src:e.poster_image,alt:e.name,width:"218",height:"327"})}),Object(p.jsxs)("div",{className:"film-card__desc",children:[Object(p.jsx)("nav",{className:"film-nav film-card__nav",children:Object(p.jsxs)("ul",{className:"film-nav__list",children:[Object(p.jsx)("li",{className:"film-nav__item".concat("Overview"===j?" film-nav__item--active":""),children:Object(p.jsx)("a",{href:"/",className:"film-nav__link",onClick:_,children:"Overview"})}),Object(p.jsx)("li",{className:"film-nav__item".concat("Details"===j?" film-nav__item--active":""),children:Object(p.jsx)("a",{href:"/",className:"film-nav__link",onClick:_,children:"Details"})}),Object(p.jsx)("li",{className:"film-nav__item".concat("Reviews"===j?" film-nav__item--active":""),children:Object(p.jsx)("a",{href:"/",className:"film-nav__link",onClick:_,children:"Reviews"})})]})}),function(e,t){switch(e){case"Overview":return Object(p.jsx)(xe,{film:t});case"Details":return Object(p.jsx)(pe,{film:t});case"Reviews":return Object(p.jsx)(ge,{comments:c})}}(j,e)]})]})})]}),Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsxs)("section",{className:"catalog catalog--like-this",children:[Object(p.jsx)("h2",{className:"catalog__title",children:"More like this"}),Object(p.jsx)(y,{films:a})]}),Object(p.jsx)(g,{})]})]})};var we=function(){var e=Object(h.c)(me),t=Object(h.c)(Y),c=Object(h.c)($);return Object(p.jsxs)("div",{className:"user-page",children:[Object(p.jsxs)("header",{className:"page-header user-page__head",children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)(B,{})}),Object(p.jsx)("h1",{className:"page-title user-page__title",children:"My list"}),Object(p.jsxs)("ul",{className:"user-block",children:[Object(p.jsx)("li",{className:"user-block__item",children:Object(p.jsx)("div",{className:"user-block__avatar",children:Object(p.jsx)("img",{src:c,alt:"User avatar",width:"63",height:"63"})})}),Object(p.jsx)("li",{className:"user-block__item",children:Object(p.jsx)(ie,{authorizationStatus:t})})]})]}),Object(p.jsxs)("section",{className:"catalog",children:[Object(p.jsx)("h2",{className:"catalog__title visually-hidden",children:"Catalog"}),Object(p.jsx)("div",{className:"catalog__films-list",children:e.map((function(e){return Object(p.jsx)(w,{film:e},e.id)}))})]}),Object(p.jsx)(g,{})]})};var ye=function(){var e=Object(h.c)(oe),t=Object(f.h)().movieId,c=e.find((function(e){return e.id===parseInt(t,10)})),a=Object(n.useRef)(null),s=Object(f.g)(),r=Object(n.useState)(!0),i=Object(x.a)(r,2),l=i[0],o=i[1],d=Object(n.useState)("00:00"),j=Object(x.a)(d,2),u=j[0],m=j[1],b=Object(n.useState)("0"),_=Object(x.a)(b,2),O=_[0],v=_[1],g=Object(n.useState)(!1),N=Object(x.a)(g,2),w=N[0],y=N[1],k=function(e,t){var c=new Date(0,0,0,0,0,e-t),a=c.getHours(),n=c.getMinutes(),s=c.getSeconds();return(a>0?[a,n,s]:[n,s]).map((function(e){return e<10?"0".concat(e):"".concat(e)})).join(":")};Object(n.useEffect)((function(){var e=a.current;return e&&(e.onloadeddata=function(){var t=k(e.duration,0);m(t)},e.ontimeupdate=function(){var t=k(e.duration,e.currentTime);if(m(t),0!==e.currentTime){var c=e.currentTime/e.duration*100;v(String(c))}y(!1)}),function(){e&&(e.ontimeupdate=null)}}),[a]);var C=Object(n.useCallback)((function(e){e.preventDefault(),a.current&&a.current.paused?a.current.play():a.current&&!a.current.paused&&a.current.pause()}),[]);return console.log(w),Object(p.jsxs)("div",{className:"player",children:[Object(p.jsx)("video",{src:null===c||void 0===c?void 0:c.video_link,className:"player__video",poster:null===c||void 0===c?void 0:c.preview_image,ref:a,onPlay:function(){return a.current?o(a.current.paused):""},onPause:function(){return a.current?o(a.current.paused):""},onWaiting:function(){return y(!0)}}),Object(p.jsx)("div",{className:"player__loading-spinner",children:Object(p.jsx)("svg",{viewBox:"0 0 100 100",width:"200",height:"200",children:Object(p.jsx)("use",{href:"#loading-spinner"})})}),Object(p.jsx)("button",{type:"button",className:"player__exit",onClick:function(){return s.push("/movie-page/".concat(null===c||void 0===c?void 0:c.id))},children:"Exit"}),Object(p.jsxs)("div",{className:"player__controls",children:[Object(p.jsxs)("div",{className:"player__controls-row",children:[Object(p.jsxs)("div",{className:"player__time",children:[Object(p.jsx)("progress",{className:"player__progress",value:O,max:"100"}),Object(p.jsx)("div",{className:"player__toggler",style:{left:"".concat(O,"%")},children:"Toggler"})]}),Object(p.jsx)("div",{className:"player__time-value",children:"-".concat(u)})]}),Object(p.jsxs)("div",{className:"player__controls-row",children:[Object(p.jsxs)("button",{type:"button",className:"player__play",onClick:C,children:[Object(p.jsxs)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:[Object(p.jsx)("use",{href:"#".concat(l?"play-s":"pause")}),";"]}),Object(p.jsx)("span",{children:"Play"})]}),Object(p.jsx)("div",{className:"player__name",children:"Transpotting"}),Object(p.jsxs)("button",{type:"button",className:"player__full-screen",onClick:function(){var e;null===(e=a.current)||void 0===e||e.requestFullscreen()},children:[Object(p.jsx)("svg",{viewBox:"0 0 27 27",width:"27",height:"27",children:Object(p.jsx)("use",{href:"#full-screen"})}),Object(p.jsx)("span",{children:"Full screen"})]})]})]})]})};var ke=function(){var e=Object(h.b)(),t=function(t){e(function(e){var t=e.email,c=e.password;return function(){var e=Object(ce.a)(te.a.mark((function e(a,n,s){var r,i,l,o;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.post(b.Login,{email:t,password:c});case 2:return r=e.sent,i=r.data.token,j(i),a(P(m.Auth)),e.next=8,s.get(b.Login);case 8:l=e.sent,o=l.data.avatar_url,a(D(o));case 11:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}()}(t))},c=Object(f.g)(),a=Object(n.useRef)(null),s=Object(n.useRef)(null);return Object(p.jsxs)("div",{className:"user-page",children:[Object(p.jsxs)("header",{className:"page-header user-page__head",children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)(B,{})}),Object(p.jsx)("h1",{className:"page-title user-page__title",children:"Sign in"})]}),Object(p.jsx)("div",{className:"sign-in user-page__content",children:Object(p.jsxs)("form",{action:"#",className:"sign-in__form",onSubmit:function(e){e.preventDefault(),null!==a.current&&null!==s.current&&t({email:a.current.value,password:s.current.value}),c.push(u.Root)},children:[Object(p.jsxs)("div",{className:"sign-in__fields",children:[Object(p.jsxs)("div",{className:"sign-in__field",children:[Object(p.jsx)("input",{className:"sign-in__input",type:"email",placeholder:"Email address",name:"user-email",id:"user-email",ref:a}),Object(p.jsx)("label",{className:"sign-in__label visually-hidden",htmlFor:"user-email",children:"Email address"})]}),Object(p.jsxs)("div",{className:"sign-in__field",children:[Object(p.jsx)("input",{className:"sign-in__input",type:"password",placeholder:"Password",name:"user-password",id:"user-password",ref:s}),Object(p.jsx)("label",{className:"sign-in__label visually-hidden",htmlFor:"user-password",children:"Password"})]})]}),Object(p.jsx)("div",{className:"sign-in__submit",children:Object(p.jsx)("button",{className:"sign-in__btn",type:"submit",children:"Sign in"})})]})}),Object(p.jsx)(g,{})]})};var Ce=function(){return Object(p.jsxs)("section",{className:"game__screen",children:[Object(p.jsx)("h1",{children:"404. Page not found"}),Object(p.jsx)(O.b,{to:"/",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})};var Se=function(e){var t=e.exact,c=e.path,a=e.render,n=Object(h.c)(Y);return Object(p.jsx)(f.b,{exact:t,path:c,render:function(){return n===m.Auth?a():Object(p.jsx)(f.a,{to:u.SignIn})}})};var Fe=function(){return Object(p.jsx)("p",{children:"Loading ..."})};var Le=function(){var e=Object(h.c)(Y),t=Object(h.c)(Z);return function(e){return e===m.Unknown}(e)||!t?Object(p.jsx)(Fe,{}):Object(p.jsx)(O.a,{children:Object(p.jsxs)(f.d,{children:[Object(p.jsx)(f.b,{exact:!0,path:u.Root,component:Oe}),Object(p.jsx)(Se,{exact:!0,path:u.MyList,render:function(){return Object(p.jsx)(we,{})}}),Object(p.jsx)(f.b,{exact:!0,path:u.MoviePage,component:Ne}),Object(p.jsx)(f.b,{exact:!0,path:u.AddReview,component:ve}),Object(p.jsx)(f.b,{exact:!0,path:u.Player,component:ye}),Object(p.jsx)(f.b,{exact:!0,path:u.SignIn,component:ke}),Object(p.jsx)(f.b,{children:Object(p.jsx)(Ce,{})})]})})},Ae=function(e){var t=o.a.create({baseURL:"https://8.react.pages.academy/wtw",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var c=t.response;return(null===c||void 0===c?void 0:c.status)===a.Unauthorized&&e(),Promise.reject(t)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(d);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){return Me.dispatch(P(m.NoAuth))})),Me=Object(_.a)({reducer:X,middleware:function(e){return e({thunk:{extraArgument:Ae}})}});Me.dispatch(function(){var e=Object(ce.a)(te.a.mark((function e(t,c,a){var n,s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.get(b.Login);case 3:n=e.sent,s=n.data.avatar_url,t(D(s)),t(P(m.Auth)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(P(m.NoAuth));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,c,a){return e.apply(this,arguments)}}()),Me.dispatch(function(){var e=Object(ce.a)(te.a.mark((function e(t,c,a){var n,s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(b.Films);case 2:n=e.sent,s=n.data,t(F(s));case 5:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}()),Me.dispatch(ne()),i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(h.a,{store:Me,children:Object(p.jsx)(Le,{})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.1c47d5e6.chunk.js.map